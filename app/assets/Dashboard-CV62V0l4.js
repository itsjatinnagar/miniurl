import{j as e,r as c,u as l,L as m}from"./index-BF8XAlqA.js";import{H as x}from"./Header--1tdnuA4.js";function f(){return e.jsxs("div",{className:"w-full flex flex-col flex-grow items-center justify-center text-center",children:[e.jsx("h2",{className:"capitalize text-3xl font-bold",children:"no links found"}),e.jsx("p",{className:"mt-2 text-gray-800",children:"You don't have any shortened links yet."})]})}const h=r=>{const t={month:"short",day:"2-digit",year:"numeric"},s=new Intl.DateTimeFormat("en-us",t),n=new Date(Number(r)*1e3);return s.format(n)};function u({data:r}){return e.jsx("div",{className:"p-6 flex flex-col bg-white rounded-xl",children:e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-6",children:[e.jsx(p,{hash:r.hash}),e.jsxs("div",{className:"flex flex-col flex-1 gap-4",children:[e.jsx(j,{long_url:r.long_url}),e.jsxs("div",{className:"flex flex-col flex-wrap gap-4 sm:flex-row sm:mt-4",children:[e.jsx(d,{icon:"chart",info:r.clicks,title:"Clicks"}),e.jsx(d,{icon:"calendar",info:h(r.created_at),title:""})]})]})]}),e.jsx("hr",{className:"border border-solid border-primary-950 md:hidden"}),e.jsxs("div",{className:"flex flex-row gap-x-2 sm:justify-end",children:[e.jsx(b,{hash:r.hash}),e.jsx(g,{hash:r.hash})]})]})})}function p({hash:r}){const t=window.location.href+r;return e.jsx("h3",{className:"text-xl font-semibold",children:e.jsxs("a",{href:t,className:"flex text-primary hover:underline",target:"_blank",children:[e.jsx("span",{children:window.location.origin}),e.jsxs("span",{children:["/",r]})]})})}function j({long_url:r}){return e.jsx("p",{className:"hidden-text text-gray-800",children:r})}function d({icon:r,title:t,info:s}){return e.jsxs("div",{className:"inline-flex items-center justify-start gap-x-1",children:[e.jsx("img",{src:`/images/${r}.svg`,alt:r,className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[s," ",t]})]})}function b({hash:r}){const[t,s]=c.useState(!1),n=async()=>{const a=window.location.href+r;try{await navigator.clipboard.writeText(a),s(!0),setTimeout(()=>{s(!1)},3e3)}catch(o){console.log(o),s(!1)}};return e.jsxs("button",{className:"h-10 w-36 min-w-fit text-sm text-primary border border-solid border-primary-900 rounded transition-colors hover:bg-primary/5",onClick:n,children:[e.jsx("img",{src:"/images/copy.svg",alt:"copy icon",className:"h-6 w-6"}),e.jsx("span",{className:"text-base font-medium",children:t?"Copied":"Copy"})]})}function g({hash:r}){const t=async()=>{try{const s=window.location.href+r,a=await(await fetch(`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${s}`)).blob(),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=`${r}.png`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}catch(s){console.error(s)}};return e.jsxs("button",{className:"h-10 w-36 min-w-fit text-sm text-primary border border-solid border-primary-900 rounded transition-colors hover:bg-primary/5",onClick:t,children:[e.jsx("img",{src:"/images/download.svg",alt:"download icon",className:"h-6 w-6"}),e.jsx("span",{className:"text-base font-medium",children:"QR Code"})]})}function w(){const{loading:r,links:t}=l();return r?e.jsx("div",{className:"w-full flex flex-grow items-center justify-center text-center",children:e.jsx(m,{className:"primary lg"})}):t.length===0?e.jsx(f,{}):e.jsxs("div",{className:"w-full flex flex-col gap-8",children:[t.map(s=>e.jsx(u,{data:s},s.id)),e.jsx(y,{})]})}function y(){return e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[e.jsx("hr",{className:"w-12 border border-solid border-primary-800"}),e.jsx("p",{className:"max-w-sm text-center text-base text-primary-100",children:"You've reached the end of your links"}),e.jsx("hr",{className:"w-12 border border-solid border-primary-800"})]})}function N(){const[r,t]=c.useState(""),{links:s,createLink:n}=l(),a=o=>{o.preventDefault(),n(r)};return c.useEffect(()=>{t("")},[s]),e.jsx("div",{className:"form-card w-full p-6 bg-white rounded-lg",children:e.jsxs("form",{onSubmit:a,className:"flex flex-col gap-4 md:flex-row",children:[e.jsx(v,{handleLink:t,value:r}),e.jsx(k,{})]})})}function v({value:r,handleLink:t}){const{error:s}=l(),n=`h-10 w-full px-2 text-primary rounded border border-solid ${s?"border-error":"border-primary-950 focus:border-primary"}`;return e.jsxs("div",{className:"input-group w-full",children:[e.jsx("input",{type:"text",inputMode:"url",name:"link",id:"link",autoComplete:"off",placeholder:"https://example.com/very-lonng-url",value:r,onChange:a=>t(a.target.value),className:n,required:!0}),s&&e.jsx("span",{className:"inline-block mt-1 text-sm text-error",children:s})]})}function k(){const{loading:r}=l();return e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center h-10 w-full bg-primary/80 text-white rounded hover:bg-primary md:max-w-60",children:r?e.jsx(m,{className:"light sm"}):"Shorten It!"})}function S(){const{fetchLinks:r}=l();return c.useEffect(()=>{r()},[]),e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsxs("main",{className:"main container mx-auto px-6 flex-col items-start gap-y-5",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Links"}),e.jsx(N,{}),e.jsx("hr",{className:"w-full border border-solid border-primary-900"}),e.jsx(w,{})]})]})}export{S as default};
