import{j as e,r as c,u as l,L as m}from"./index-C247-SHD.js";import{H as x}from"./Header-B2Qv1s49.js";function f(){return e.jsxs("div",{className:"w-full flex flex-col flex-grow items-center justify-center text-center",children:[e.jsx("h2",{className:"capitalize text-3xl font-bold",children:"no links found"}),e.jsx("p",{className:"mt-2 text-gray-800",children:"You don't have any shortened links yet."})]})}const h=s=>{const t={month:"short",day:"2-digit",year:"numeric"},r=new Intl.DateTimeFormat("en-us",t),n=new Date(Number(s)*1e3);return r.format(n)};function u({data:s}){return e.jsx("div",{className:"p-6 flex flex-col bg-white rounded-xl",children:e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-6",children:[e.jsx(p,{hash:s.hash}),e.jsxs("div",{className:"flex flex-col flex-1 gap-4",children:[e.jsx(j,{long_url:s.long_url}),e.jsxs("div",{className:"flex flex-col flex-wrap gap-4 sm:flex-row sm:mt-4",children:[e.jsx(d,{icon:"chart",info:s.clicks,title:"Clicks"}),e.jsx(d,{icon:"calendar",info:h(s.created_at),title:""})]})]})]}),e.jsx("hr",{className:"border border-solid border-primary-950 md:hidden"}),e.jsxs("div",{className:"flex flex-row gap-x-2 sm:justify-end",children:[e.jsx(b,{hash:s.hash}),e.jsx(g,{hash:s.hash})]})]})})}function p({hash:s}){const t=window.location.href+s;return e.jsx("h3",{className:"text-xl font-semibold",children:e.jsxs("a",{href:t,className:"flex text-primary hover:underline",target:"_blank",children:[e.jsx("span",{className:"hidden-text",children:window.location.origin}),e.jsxs("span",{children:["/",s]})]})})}function j({long_url:s}){return e.jsx("p",{className:"hidden-text text-gray-800",children:s})}function d({icon:s,title:t,info:r}){return e.jsxs("div",{className:"inline-flex items-center justify-start gap-x-1",children:[e.jsx("img",{src:`/images/${s}.svg`,alt:s,className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[r," ",t]})]})}function b({hash:s}){const[t,r]=c.useState(!1),n=async()=>{const a=window.location.href+s;try{await navigator.clipboard.writeText(a),r(!0),setTimeout(()=>{r(!1)},3e3)}catch(o){console.log(o),r(!1)}};return e.jsxs("button",{className:"h-10 w-36 min-w-fit text-sm text-primary border border-solid border-primary-900 rounded transition-colors hover:bg-primary/5",onClick:n,children:[e.jsx("img",{src:"/images/copy.svg",alt:"copy icon",className:"h-6 w-6"}),e.jsx("span",{className:"text-base font-medium",children:t?"Copied":"Copy"})]})}function g({hash:s}){const t=async()=>{try{const r=window.location.href+s,a=await(await fetch(`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${r}`)).blob(),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=`${s}.png`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}catch(r){console.error(r)}};return e.jsxs("button",{className:"h-10 w-36 min-w-fit text-sm text-primary border border-solid border-primary-900 rounded transition-colors hover:bg-primary/5",onClick:t,children:[e.jsx("img",{src:"/images/download.svg",alt:"download icon",className:"h-6 w-6"}),e.jsx("span",{className:"text-base font-medium",children:"QR Code"})]})}function w(){const{loading:s,links:t}=l();return s?e.jsx("div",{className:"w-full flex flex-grow items-center justify-center text-center",children:e.jsx(m,{className:"primary lg"})}):t.length===0?e.jsx(f,{}):e.jsxs("div",{className:"w-full flex flex-col gap-8",children:[t.map(r=>e.jsx(u,{data:r},r.id)),e.jsx(y,{})]})}function y(){return e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[e.jsx("hr",{className:"w-12 border border-solid border-primary-800"}),e.jsx("p",{className:"max-w-sm text-center text-base text-primary-100",children:"You've reached the end of your links"}),e.jsx("hr",{className:"w-12 border border-solid border-primary-800"})]})}function N(){const[s,t]=c.useState(""),{links:r,createLink:n}=l(),a=o=>{o.preventDefault(),n(s)};return c.useEffect(()=>{t("")},[r]),e.jsx("div",{className:"form-card w-full p-6 bg-white rounded-lg",children:e.jsxs("form",{onSubmit:a,className:"flex flex-col gap-4 md:flex-row",children:[e.jsx(v,{handleLink:t,value:s}),e.jsx(k,{})]})})}function v({value:s,handleLink:t}){const{error:r}=l(),n=`h-10 w-full px-2 text-primary rounded border border-solid ${r?"border-error":"border-primary-950 focus:border-primary"}`;return e.jsxs("div",{className:"input-group w-full",children:[e.jsx("input",{type:"text",inputMode:"url",name:"link",id:"link",autoComplete:"off",placeholder:"https://example.com/very-lonng-url",value:s,onChange:a=>t(a.target.value),className:n,required:!0}),r&&e.jsx("span",{className:"inline-block mt-1 text-sm text-error",children:r})]})}function k(){const{loading:s}=l();return e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center h-10 w-full bg-primary/80 text-white rounded hover:bg-primary md:max-w-60",children:s?e.jsx(m,{className:"light sm"}):"Shorten It!"})}function S(){const{fetchLinks:s}=l();return c.useEffect(()=>{s()},[]),e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsxs("main",{className:"main container mx-auto px-6 flex-col items-start gap-y-5",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Links"}),e.jsx(N,{}),e.jsx("hr",{className:"w-full border border-solid border-primary-900"}),e.jsx(w,{})]})]})}export{S as default};
